@using WEBBANMP_NLCS.Models
@using System.Globalization;
@model ITEMGIOHANG
@{
    ViewBag.Title = "SuaGioHang";
    Layout = "~/Views/Layout/_AccountLayout.cshtml";
}

@{
    List<ITEMGIOHANG> lstItemGioHang = (List<ITEMGIOHANG>)ViewBag.GioHang;
}

<div class="table-responsive cart_info">
    <table class="table table-condensed">
        <thead>
            <tr class="cart_menu">
                <td class="image">Sản phẩm</td>
                <td class="description"></td>
                <td class="price">Đơn giá</td>
                <td class="quantity">Số lượng</td>
                <td class="total">Thành tiền</td>
                <td></td>
                <td></td>
            </tr>
        </thead>
        <tbody>

            @foreach (var item in lstItemGioHang)
            {
                if (Model.SP_MA == item.SP_MA)
                {
                    using (Html.BeginForm("CapNhatGioHang", "GioHang"))
                    {

                        <tr>

                            <td class="cart_product">
                                <a><img src="@Url.Content("~/Content/HinhAnhSP/" + item.SP_HINH)" class="img-cart" alt=""></a>
                            </td>
                            <td class="cart_description">
                                <h4><a href="@Url.Action("XemChiTiet", "SanPham", new { id = item.SP_MA })">@item.SP_TEN</a></h4>
                                <p>Mã sản phẩm: @item.SP_MA</p> 
                                @Html.Hidden("SP_MA", item.SP_MA) @*Name đặt trùng với thuộc tính của model*@
                            </td>
                            <td class="cart_price">
                                <p>@string.Format(new CultureInfo("vi-VN"), "{0:#,##0}", item.GIABAN) VNĐ</p>
                            </td>
                            <td class="cart_quantity">
                                <div class="cart_quantity_button">

                                    <input class="cart_quantity_input SoLuong" type="number" min="1" max="@item.SOLUONGTON" value="@item.SOLUONG" name="SoLuong">

                                </div>

                            </td>
                            <td class="cart_total">
                                <p class="cart_total_price">@string.Format(new CultureInfo("vi-VN"), "{0:#,##0}", item.THANHTIEN) VNĐ</p>
                            </td>

                            <td> <input type="submit" class="btn btn-light" value="Cập nhật" /> </td>

                            <td class="cart_delete">
                                <a class="cart_quantity_delete" href="@Url.Action("XoaGioHang",  "GioHang", new { @MaSP = item.SP_MA})"><i class="fa fa-times"></i></a>
                            </td>

                        </tr>
                    }

                }
            }


            



        </tbody>
    </table>
</div>



